import{a as U}from"./vendor-N5iQpiFS.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function o(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(a){if(a.ep)return;a.ep=!0;const r=o(a);fetch(a.href,r)}})();const j="016a30ce49a7789188b6fa9bad9963a6",w="https://api.themoviedb.org/3",k="https://image.tmdb.org/t/p",E={TRENDING_WEEK:"/trending/movie/week",TRENDING_DAY:"/trending/movie/day",POPULAR_MOVIES:"/movie/popular",UPCOMING_MOVIES:"/movie/upcoming",MOVIE_DETAILS:e=>`/movie/${e}`,MOVIE_VIDEOS:e=>`/movie/${e}/videos`,SEARCH_MOVIES:"/search/movie",GENRE_LIST:"/genre/movie/list",IMG_W500:"/w500",IMG_W780:"/w780",IMG_W1280:"/w1280",IMG_ORIGINAL:"/original"};async function M(e,t,o={}){try{return(await U.get(`${e}${t}`,{params:{api_key:j,language:"en-US",page:1,...o}})).data}catch(n){throw console.error("Error fetching data:",n),n}}document.addEventListener("DOMContentLoaded",()=>{console.log("Trailer modal script loaded");const e=document.querySelector(".hero"),t=document.querySelector(".modal-trailer"),o=t.querySelector(".modal-trailer__close"),n=document.querySelector(".hero-button-watchTrailer"),a=t.querySelector(".modal-trailer__video");console.log("Elements found:",{modal:!!t,closeBtn:!!o,watchTrailerBtn:!!n,iframe:!!a});function r(){const i=a.src;a.src=i}function s(){console.log("Closing modal"),t.classList.remove("active"),document.body.style.overflow="auto",r()}function l(){console.log("Opening modal"),t.classList.add("active"),document.body.style.overflow="hidden",console.log("video api ",e.dataset.movieid),M(w,`/movie/${e.dataset.movieid}/videos`,{page:1}).then(i=>{console.log("VIDEO:",i);const g=i.results.find(m=>m.official===!0&&m.site==="YouTube"&&m.type==="Trailer");if(g){const m=`https://www.youtube.com/embed/${g.key}`;console.log(a.src),a.src=m,console.log(a.src)}else console.log("No official YouTube trailer found.")})}n&&n.addEventListener("click",i=>{console.log("Watch trailer button clicked"),i.preventDefault(),l()}),o&&o.addEventListener("click",i=>{console.log("Close button clicked"),i.preventDefault(),s()}),t&&t.addEventListener("click",i=>{i.target===t&&(console.log("Clicked outside modal"),s())}),document.addEventListener("keydown",i=>{i.key==="Escape"&&t.classList.contains("active")&&(console.log("Escape key pressed"),s())}),window.trailerModal={open:l,close:s}});document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("genre-dropdown-container"),t=document.getElementById("load-more-container"),o=document.getElementById("library-list"),n=document.getElementById("default-content"),a=document.getElementById("genre-dropdown"),r=10;let s=1;const l=JSON.parse(localStorage.getItem("myLibrary"))||[];if(l.length===0){n.style.display="block",e.style.display="none",t.style.display="none";return}n.style.display="none",e.style.display="block",A(l.slice(0,r)),l.length>r?t.style.display="block":t.style.display="none",a.addEventListener("change",i=>{const g=i.target.value,m=g==="all"?l.slice(0,s*r):l.filter(c=>c.genre_ids.includes(parseInt(g)));m.length===0?(n.style.display="block",o.innerHTML="",e.style.display="block",t.style.display="none"):(n.style.display="none",A(m.slice(0,s*r)),t.style.display=m.length>s*r?"block":"none")}),document.getElementById("load-more").addEventListener("click",()=>{s++;const i=l.slice(0,s*r);A(i),i.length>=l.length&&(t.style.display="none")})});function A(e){const t=document.getElementById("library-list");t.innerHTML="",e.forEach(o=>{const n=document.createElement("div");n.className="movie-item",n.innerHTML=`
      <img src="https://image.tmdb.org/t/p/w500${o.poster_path}" alt="${o.title}" class="movie-poster">
      <div class="catalog-card-info-container">
        <h3 class="catalog-card-title">${o.title}</h3>
        <p class="catalog-card-description">${J(o.genre_ids)} | ${o.release_date?o.release_date.split("-")[0]:"Unknown"}</p>
        <p class="rating">⭐ ${o.vote_average.toFixed(1)}</p>
      </div>
    `,n.addEventListener("click",()=>{window.movieModal.show(o.id)}),t.appendChild(n)})}function J(e){const t={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};return!e||!Array.isArray(e)?"":e.map(n=>t[n]||"Unknown").slice(0,2).join(", ")}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("theme-switch"),t=document.documentElement,o=document.body,n=localStorage.getItem("theme");n?(t.classList.add(n),o.classList.add(n),e.checked=n==="light-theme"):(t.classList.add("dark-theme"),o.classList.add("dark-theme"),e.checked=!1,localStorage.setItem("theme","dark-theme")),requestAnimationFrame(()=>{t.classList.add("theme-loaded")}),e.addEventListener("change",()=>{e.checked?(t.classList.remove("dark-theme"),t.classList.add("light-theme"),o.classList.remove("dark-theme"),o.classList.add("light-theme"),localStorage.setItem("theme","light-theme")):(t.classList.remove("light-theme"),t.classList.add("dark-theme"),o.classList.remove("light-theme"),o.classList.add("dark-theme"),localStorage.setItem("theme","dark-theme"))})});document.addEventListener("DOMContentLoaded",function(){const e=document.createElement("div");fetch("modal.html").then(t=>t.text()).then(t=>{e.innerHTML=t;const o=document.getElementById("teamModal"),n=document.getElementById("teamLink"),a=document.getElementById("closeModal");n.addEventListener("click",function(){o.classList.add("active"),document.body.style.overflow="hidden"});function r(){o.classList.remove("active"),document.body.style.overflow="auto"}a.addEventListener("click",r),o.addEventListener("click",function(s){s.target===o&&r()}),document.addEventListener("keydown",function(s){s.key==="Escape"&&r()})}).catch(t=>console.error("Modal yüklenirken bir hata oluştu:",t))});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".mobile-menu-btn"),t=document.querySelector(".mobile-menu"),o=document.querySelector(".mobile-menu-icon use"),n=document.body;function a(){const l=t.classList.contains("is-open"),i=o.getAttribute("href").split("#")[0];t.classList.toggle("is-open"),e.setAttribute("aria-expanded",!l),o.setAttribute("href",l?i+"#icon-menu":i+"#icon-close"),n.style.overflow=l?"":"hidden"}e&&t&&(e.addEventListener("click",i=>{i.stopPropagation(),a()}),document.querySelectorAll(".mobile-nav-link").forEach(i=>{i.addEventListener("click",()=>{a()})}),document.addEventListener("click",i=>{t.classList.contains("is-open")&&!i.target.closest(".mobile-menu")&&!i.target.closest(".mobile-menu-btn")&&a()}),t.addEventListener("click",i=>{i.stopPropagation()}),document.addEventListener("keydown",i=>{i.key==="Escape"&&t.classList.contains("is-open")&&a()}));const r=window.location.pathname;document.querySelectorAll(".nav-link, .mobile-nav-link").forEach(l=>{l.classList.remove("active")}),r.includes("catalog.html")?document.querySelectorAll('[data-page="catalog"]').forEach(l=>{l.classList.add("active")}):r.includes("mylibrary.html")?document.querySelectorAll('[data-page="library"]').forEach(l=>{l.classList.add("active")}):document.querySelectorAll('[data-page="home"]').forEach(l=>{l.classList.add("active")})});const K=document.querySelector("#weekly-movie-card");async function Q(){try{const t=(await M(w,E.TRENDING_WEEK)).results.slice(0,3),o=t.map(n=>`
                <li class="catalog-item" id="weekly-movie-${n.id}">
                    <img class="catalog-img" src="${k}/w500${n.poster_path}" alt="${n.title}">
                    <div class="catalog-info">
                        <h2 class="catalog-title">${n.title}</h2>
                    </div>
                    <div class="catalog-stars">
                        <span class="stars">⭐ ${n.vote_average.toFixed(1)}</span>
                    </div>
                </li>
            `);K.innerHTML=o.join(""),t.forEach(n=>{document.getElementById(`weekly-movie-${n.id}`).addEventListener("click",()=>{window.movieModal.show(n.id)})})}catch(e){console.error("Error loading weekly movies:",e)}}Q();let y=1;const C=document.querySelector(".upcoming__library-btn"),B=document.querySelector("#content-poster"),z=document.querySelector("#movie-title"),X=document.querySelector("#date-of-release"),Z=document.querySelector("#avarage-vote"),ee=document.querySelector("#popularity"),te=document.querySelector("#count-vote"),oe=document.querySelector("#genres");let N={};const ne=document.querySelector("#summary");document.querySelector(".upcoming-title");let f=1;M(w,E.GENRE_LIST).then(e=>{e.genres.forEach(t=>{N[t.id]=t.name})});const re=()=>{M(w,E.UPCOMING_MOVIES,{page:1}).then(e=>{const t=new Date,o=e.results.filter(r=>{const s=new Date(r.release_date);return console.log("movie id",f),s>=t});if(o.length>0){let l=function(){return(JSON.parse(localStorage.getItem("myLibrary"))||[]).some(S=>S.id===f)},i=function(){const h=l();C.textContent=h?"Remove from my library":"Add to my library",C.dataset.action=h?"remove":"add"},g=function(){const h=JSON.parse(localStorage.getItem("myLibrary"))||[],S=h.findIndex(b=>b.id===y.id);console.log("index",S),y.genres&&!y.genre_ids&&(y.genre_ids=y.genres.map(b=>b.id)),y.genre_ids&&!y.genres&&(y.genres=y.genre_ids.map(b=>({id:b,name:N[b]||"Unknown"}))),S===-1?h.push(y):h.splice(S,1),localStorage.setItem("myLibrary",JSON.stringify(h)),i(y.id)};const r=o[Math.floor(Math.random()*o.length)],s=`${k}${E.IMG_W1280}${r.backdrop_path}`;y=r,B.src=s,B.alt=r.title,B.title=r.overview,z.innerHTML=`${r.title}`,console.log("movie ",r.id),f=r.id,console.log("verelim bir veri",f),C.addEventListener("click",()=>{f&&(n(f),g())});const m=new Date(r.release_date),c=m.getDate().toString().padStart(2,"0"),d=(m.getMonth()+1).toString().padStart(2,"0"),p=m.getFullYear();X.innerHTML=`${c}.${d}.${p}`,Z.innerHTML=`${r.vote_average}`,ee.innerHTML=`${r.popularity}`,te.innerHTML=`${r.vote_count}`;const u=r.genre_ids.map(h=>N[h]).join(", ");oe.innerHTML=u,ne.innerHTML=`${r.overview}`}function n(r){fetch(`https://api.themoviedb.org/3/movie/${r}?api_key=016a30ce49a7789188b6fa9bad9963a6&language=en-US`).then(s=>s.json()).then(s=>(console.log("veriAL",s),s)).catch(s=>{console.error("Hata oluştu:",s)})}const a=n(f);console.log("turkiye",a)})};re();console.log("upcoming js yüklendi");const ae=document.querySelector(".loader");window.onload=()=>{ae.classList.remove("loader--shown"),document.body.removeAttribute("style")};function ie(){const e=window.innerWidth-document.documentElement.clientWidth;document.body.style.overflow="hidden",document.body.style.paddingRight=`${e}px`}ie();document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".scroll-to-top"),t=100;function o(){window.scrollY>t?e.classList.add("visible"):e.classList.remove("visible")}function n(){window.scrollTo({top:0,behavior:"smooth"})}window.addEventListener("scroll",o),e.addEventListener("click",n),o()});const v=document.querySelector("#heroImg"),se=document.querySelector(".hero-h1");document.querySelector(".hero-rating-stars");const ce=document.querySelector(".hero-summary"),le=document.querySelector(".hero-button-moreDetails");document.querySelector(".hero-button-watchTrailer");const de=document.querySelector(".hero");let D=null;function me(e){return e.length>170?e.slice(0,170)+"...":e}function ue(e){const t=`${k}/w500${e.backdrop_path}`,o=`${k}/w780${e.backdrop_path}`,n=`${k}/w1280${e.backdrop_path}`;window.matchMedia("(max-width: 767px)").matches?(v.style.backgroundImage=`url(${t})`,v.style.height="380px"):window.matchMedia("(min-width: 768px) and (max-width: 1279px)").matches?(v.style.backgroundImage=`url(${o})`,v.style.height="432px"):(v.style.backgroundImage=`url(${n})`,v.style.height="720px"),v.setAttribute("aria-label",e.title),se.innerHTML=e.title,ce.innerHTML=me(e.overview),D=e.id}M(w,E.POPULAR_MOVIES,{page:1}).then(e=>{if(e.results&&e.results.length>0){const t=Math.floor(Math.random()*20),o=e.results[t];de.dataset.movieid=o.id,ue(o)}else console.error("No movies found for hero section.")});le.addEventListener("click",()=>{D&&window.movieModal.show(D)});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".modal-details"),t=e.querySelector(".modal-details__close"),o=e.querySelector(".modal-details__library-btn");let n=null;const a={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};function r(){e.classList.remove("active"),document.body.style.overflow="auto"}t.addEventListener("click",r),e.addEventListener("click",c=>{c.target===e&&r()}),document.addEventListener("keydown",c=>{c.key==="Escape"&&e.classList.contains("active")&&r()});function s(c){return(JSON.parse(localStorage.getItem("myLibrary"))||[]).some(p=>p.id===c)}function l(c){const d=s(c);o.textContent=d?"Remove from my library":"Add to my library",o.dataset.action=d?"remove":"add"}function i(c){const d=JSON.parse(localStorage.getItem("myLibrary"))||[],p=d.findIndex(u=>u.id===c.id);c.genres&&!c.genre_ids&&(c.genre_ids=c.genres.map(u=>u.id)),c.genre_ids&&!c.genres&&(c.genres=c.genre_ids.map(u=>({id:u,name:a[u]||"Unknown"}))),p===-1?d.push(c):d.splice(p,1),localStorage.setItem("myLibrary",JSON.stringify(d)),l(c.id)}o.addEventListener("click",async()=>{if(n){const c=await g(n);i(c)}});async function g(c){const d="016a30ce49a7789188b6fa9bad9963a6",p="https://api.themoviedb.org/3";try{const u=await fetch(`${p}/movie/${c}?api_key=${d}&language=en-US`);if(!u.ok)throw new Error("Failed to fetch movie details");return await u.json()}catch(u){return console.error("Error fetching movie details:",u),null}}async function m(c){const d=await g(c);d&&(n=d.id,e.querySelector(".modal-details__image").src=`https://image.tmdb.org/t/p/w500${d.poster_path}`,e.querySelector(".modal-details__image").alt=d.title,e.querySelector(".modal-details__title").textContent=d.title,e.querySelector(".modal-details__vote").textContent=d.vote_average.toFixed(1),e.querySelector(".modal-details__votes").textContent=d.vote_count,e.querySelector(".modal-details__popularity").textContent=d.popularity.toFixed(1),e.querySelector(".modal-details__genre").textContent=d.genres.map(p=>p.name).join(", "),e.querySelector(".modal-details__about-text").textContent=d.overview,l(d.id),e.classList.add("active"),document.body.style.overflow="hidden")}window.movieModal={show:m,close:r}});const ye="016a30ce49a7789188b6fa9bad9963a6",ge="https://api.themoviedb.org/3",P=document.getElementById("paginationNumbers"),I=document.getElementById("prevButton"),$=document.getElementById("nextButton"),R=document.getElementById("movie-list"),O=document.querySelector(".error-message");let L=1,_=1,W="";const pe={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};function he(e){return!e||!Array.isArray(e)?"":e.map(n=>pe[n]||"Unknown").slice(0,2).join(", ")}function fe(e){return e?e.split("-")[0]:""}function ve(){F(1),I.addEventListener("click",()=>H(L-1)),$.addEventListener("click",()=>H(L+1))}function V(e){W=e.trim(),F(1)}async function F(e){try{const t=await Le(e,W);be(t.results),L=t.page,_=t.total_pages,Ee()}catch(t){console.error("Failed to load movies:",t),Y("Failed to load movies. Please try again.")}}async function Le(e,t){try{let o="/trending/movie/week",n={api_key:ye,page:e};return t&&(o="/search/movie",n.query=t),(await U.get(`${ge}${o}`,{params:n})).data}catch(o){throw console.error("Error fetching movies:",o),o}}function be(e){if(R.innerHTML="",O.style.display="none",!e||e.length===0){Y("No movies found.");return}e.forEach(t=>{const o=document.createElement("div");o.className="catalog-item",o.style.backgroundImage=`url(https://image.tmdb.org/t/p/w500${t.poster_path})`;const n=he(t.genre_ids),a=fe(t.release_date),r=`${n}${a?` | ${a}`:""}`;o.innerHTML=`
      <div class="catalog-card-info-container">
        <h3 class="catalog-card-title">${t.title}</h3>
        <p class="catalog-card-description">${r}</p>
        <p class="rating">⭐ ${t.vote_average.toFixed(1)}</p>
      </div>
    `,R.appendChild(o),o.addEventListener("click",()=>{window.movieModal.show(t.id)})})}function Ee(){if(P.innerHTML="",_<2){I.style.display="none",$.style.display="none";return}else I.style.display="inline-block",$.style.display="inline-block";const e=Math.max(1,L-2),t=Math.min(_,e+4);for(let o=e;o<=t;o++){const n=document.createElement("button");n.textContent=o,n.classList.add("pagination-button"),o===L&&n.classList.add("active"),n.addEventListener("click",()=>H(o)),P.appendChild(n)}I.disabled=L===1,$.disabled=L===_}function Y(e){O.textContent=e,O.style.display="block"}async function H(e){e>=1&&e<=_&&await F(e)}const we=document.getElementById("search-form"),T=document.getElementById("search-input"),q=document.getElementById("clear-button"),Me=document.getElementById("movie-list");T.addEventListener("input",()=>{T.value.trim()!==""?q.style.display="inline":q.style.display="none"});q.addEventListener("click",()=>{T.value="",q.style.display="none",V("")});we.addEventListener("submit",e=>{e.preventDefault();const t=T.value.trim();t&&(V(t),Se())});function Se(){Me.querySelectorAll(".catalog-item").forEach(t=>{const o=t.id.split("-")[2];t.addEventListener("click",()=>{window.movieModal.show(o)})})}const G=document.getElementById("movie-list"),x=document.querySelector(".error-message"),ke={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"};function _e(e){return!e||!Array.isArray(e)?"":e.map(n=>ke[n]||"Unknown").slice(0,2).join(", ")}function Ie(e){return e?e.split("-")[0]:""}function $e(e){G.innerHTML="",e.forEach(t=>{const o=document.createElement("div");o.className="catalog-item",o.id=`catalog-movie-${t.id}`,o.style.backgroundImage=`url(https://image.tmdb.org/t/p/w500${t.poster_path})`;const n=_e(t.genre_ids),a=Ie(t.release_date),r=`${n}${a?` | ${a}`:""}`;o.innerHTML=`
            <div class="catalog-card-info-container">
                <h3 class="catalog-card-title">${t.title}</h3>
                <p class="catalog-card-description">${r}</p>
                <p class="rating">⭐ ${t.vote_average.toFixed(1)}</p>
            </div>
        `,G.appendChild(o),o.addEventListener("click",()=>{window.movieModal.show(t.id)})})}async function Te(){try{const e=await M(w,E.TRENDING_WEEK);e.results&&e.results.length>0?($e(e.results),x.style.display="none"):(G.innerHTML="",x.style.display="block")}catch(e){console.error("Error fetching movies:",e),x.style.display="block"}}document.addEventListener("DOMContentLoaded",()=>{ve(),Te()});
//# sourceMappingURL=main-CYnFZq94.js.map
